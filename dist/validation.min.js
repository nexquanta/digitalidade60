let validationInitialized=false;export function initValidation(){if(validationInitialized){cleanup();}console.log('‚úÖ Inicializando sistema de valida√ß√£o');const form=document.querySelector('form');if(!form){console.log('‚ÑπÔ∏è Nenhum formul√°rio encontrado nesta p√°gina');return;}const inputs=form.querySelectorAll('input,select,textarea');inputs.forEach(input=>{input.addEventListener('input',()=>validar(input));input.addEventListener('blur',()=>validar(input));});form.addEventListener('submit',handleSubmit);aplicarMascaras(form);validationInitialized=true;}function validar(campo){const valor=campo.value.trim();const obrigatorio=campo.hasAttribute('required');removerErro(campo);if(obrigatorio&&!valor){marcarInvalido(campo,'Este campo √© obrigat√≥rio');return false;}if(valor){if(campo.type==='email'){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(valor)){marcarInvalido(campo,'Digite um e-mail v√°lido');return false;}}if(campo.name==='cpf'){const cpfRegex=/^\d{3}\.\d{3}\.\d{3}-\d{2}$/;if(!cpfRegex.test(valor)){marcarInvalido(campo,'Formato:000.000.000-00');return false;}if(!validarCPF(valor)){marcarInvalido(campo,'CPF inv√°lido');return false;}}if(campo.name==='cep'){const cepRegex=/^\d{5}-\d{3}$/;if(!cepRegex.test(valor)){marcarInvalido(campo,'Formato:00000-000');return false;}}if(campo.type==='tel'){const telRegex=/^\(\d{2}\)\s?\d{4,5}-\d{4}$/;if(!telRegex.test(valor)){marcarInvalido(campo,'Formato:(11)99999-0000');return false;}}if(campo.type==='date'){const data=new Date(valor);const hoje=new Date();if(data>hoje){marcarInvalido(campo,'Data n√£o pode ser futura');return false;}const idade=hoje.getFullYear()-data.getFullYear();const mes=hoje.getMonth()-data.getMonth();if(idade<18||(idade===18&&mes<0)){marcarInvalido(campo,'√â necess√°rio ter 18 anos ou mais');return false;}if(idade>120){marcarInvalido(campo,'Data de nascimento inv√°lida');return false;}}if(campo.tagName==='SELECT'&&valor===''){marcarInvalido(campo,'Selecione uma op√ß√£o');return false;}}marcarValido(campo);return true;}function validarCPF(cpf){cpf=cpf.replace(/\D/g,'');if(cpf.length!==11)return false;if(/^(\d)\1{10}$/.test(cpf))return false;let soma=0;for(let i=0;i<9;i++){soma+=parseInt(cpf.charAt(i))*(10-i);}let resto=soma % 11;let digitoVerificador1=resto<2 ? 0:11-resto;if(digitoVerificador1!==parseInt(cpf.charAt(9)))return false;soma=0;for(let i=0;i<10;i++){soma+=parseInt(cpf.charAt(i))*(11-i);}resto=soma % 11;let digitoVerificador2=resto<2 ? 0:11-resto;if(digitoVerificador2!==parseInt(cpf.charAt(10)))return false;return true;}function marcarInvalido(campo,mensagem){campo.classList.remove('is-valid');campo.classList.add('is-invalid');const erro=document.createElement('div');erro.className='error-message';erro.textContent=mensagem;campo.parentNode.insertBefore(erro,campo.nextSibling);}function marcarValido(campo){campo.classList.remove('is-invalid');campo.classList.add('is-valid');}function removerErro(campo){const erro=campo.parentNode.querySelector('.error-message');if(erro){erro.remove();}}function handleSubmit(e){e.preventDefault();console.log('üìù Validando formul√°rio...');const form=e.target;const inputs=form.querySelectorAll('input,select,textarea');let valido=true;inputs.forEach(input=>{if(!validar(input)){valido=false;}});if(valido){console.log('‚úÖ Formul√°rio v√°lido!Enviando...');const formData=new FormData(form);const dados=Object.fromEntries(formData.entries());console.log('üì¶ Dados do formul√°rio:',dados);mostrarSucesso();form.reset();inputs.forEach(input=>{input.classList.remove('is-valid','is-invalid');removerErro(input);});}else{console.log('‚ùå Formul√°rio cont√©m erros');mostrarErro('Por favor,corrija os erros antes de enviar.');}}function aplicarMascaras(form){const cpf=form.querySelector('input[name="cpf"]');if(cpf){cpf.addEventListener('input',function(e){let v=e.target.value.replace(/\D/g,'');if(v.length>11)v=v.slice(0,11);v=v.replace(/(\d{3})(\d)/,'$1.$2');v=v.replace(/(\d{3})(\d)/,'$1.$2');v=v.replace(/(\d{3})(\d{1,2})$/,'$1-$2');e.target.value=v;});}const cep=form.querySelector('input[name="cep"]');if(cep){cep.addEventListener('input',function(e){let v=e.target.value.replace(/\D/g,'');if(v.length>8)v=v.slice(0,8);v=v.replace(/(\d{5})(\d)/,'$1-$2');e.target.value=v;});}const tel=form.querySelector('input[name="telefone"]');if(tel){tel.addEventListener('input',function(e){let v=e.target.value.replace(/\D/g,'');if(v.length>11)v=v.slice(0,11);if(v.length<=10){v=v.replace(/(\d{2})(\d)/,'($1)$2');v=v.replace(/(\d{4})(\d)/,'$1-$2');}else{v=v.replace(/(\d{2})(\d)/,'($1)$2');v=v.replace(/(\d{5})(\d)/,'$1-$2');}e.target.value=v;});}}function mostrarSucesso(){const toast=document.createElement('div');toast.className='toast toast-success';toast.innerHTML='<strong>‚úì</strong>Cadastro enviado com sucesso!';document.body.appendChild(toast);setTimeout(()=>{toast.classList.add('show');},100);setTimeout(()=>{toast.classList.remove('show');setTimeout(()=>{toast.remove();},300);},3000);}function mostrarErro(mensagem){const toast=document.createElement('div');toast.className='toast toast-error';toast.innerHTML='<strong>‚úó</strong>'+mensagem;document.body.appendChild(toast);setTimeout(()=>{toast.classList.add('show');},100);setTimeout(()=>{toast.classList.remove('show');setTimeout(()=>{toast.remove();},300);},3000);}function cleanup(){const form=document.querySelector('form');if(form){const newForm=form.cloneNode(true);form.parentNode.replaceChild(newForm,form);}validationInitialized=false;}document.addEventListener('pageRendered',()=>{setTimeout(()=>{initValidation();},100);});